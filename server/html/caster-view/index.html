<html>
    <head>
        <title>Caster-View</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
    </head>
    <body>
        <div class="ui container">
            <h1>Caster-View - Items</h1>
            <div class="ui grid">
                <div class="row">
                    <div class="eight wide column">Blue Team:</div>
                    <div class="eight wide column">Red Team:</div>
                </div>
                <div class="row">
                    <div class="eight wide column">Blue P1:
                        <div class="ui accordion" team="blue" playerid="0">
                            <div class="title" item="0"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="0"><p></p></div>
                            <div class="title" item="1"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="1"><p></p></div>
                            <div class="title" item="2"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="2"><p></p></div>
                            <div class="title" item="3"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="3"><p></p></div>
                            <div class="title" item="4"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="4"><p></p></div>
                            <div class="title" item="5"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="5"><p></p></div>
                            <div class="title" item="6"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="6"><p></p></div>
                        </div>
                    </div>
                    <div class="eight wide column">Red P1:
                        <div class="ui accordion" team="red" playerid="0">
                            <div class="title" item="0"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="0"><p></p></div>
                            <div class="title" item="1"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="1"><p></p></div>
                            <div class="title" item="2"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="2"><p></p></div>
                            <div class="title" item="3"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="3"><p></p></div>
                            <div class="title" item="4"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="4"><p></p></div>
                            <div class="title" item="5"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="5"><p></p></div>
                            <div class="title" item="6"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="6"><p></p></div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="eight wide column">Blue P2:
                        <div class="ui accordion" team="blue" playerid="1">
                            <div class="title" item="0"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="0"><p></p></div>
                            <div class="title" item="1"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="1"><p></p></div>
                            <div class="title" item="2"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="2"><p></p></div>
                            <div class="title" item="3"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="3"><p></p></div>
                            <div class="title" item="4"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="4"><p></p></div>
                            <div class="title" item="5"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="5"><p></p></div>
                            <div class="title" item="6"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="6"><p></p></div>
                        </div>
                    </div>
                    <div class="eight wide column">Red P2:
                        <div class="ui accordion" team="red" playerid="1">
                            <div class="title" item="0"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="0"><p></p></div>
                            <div class="title" item="1"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="1"><p></p></div>
                            <div class="title" item="2"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="2"><p></p></div>
                            <div class="title" item="3"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="3"><p></p></div>
                            <div class="title" item="4"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="4"><p></p></div>
                            <div class="title" item="5"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="5"><p></p></div>
                            <div class="title" item="6"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="6"><p></p></div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="eight wide column">Blue P3:
                        <div class="ui accordion" team="blue" playerid="2">
                            <div class="title" item="0"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="0"><p></p></div>
                            <div class="title" item="1"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="1"><p></p></div>
                            <div class="title" item="2"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="2"><p></p></div>
                            <div class="title" item="3"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="3"><p></p></div>
                            <div class="title" item="4"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="4"><p></p></div>
                            <div class="title" item="5"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="5"><p></p></div>
                            <div class="title" item="6"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="6"><p></p></div>
                        </div>
                    </div>
                    <div class="eight wide column">Red P3:
                        <div class="ui accordion" team="red" playerid="2">
                            <div class="title" item="0"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="0"><p></p></div>
                            <div class="title" item="1"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="1"><p></p></div>
                            <div class="title" item="2"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="2"><p></p></div>
                            <div class="title" item="3"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="3"><p></p></div>
                            <div class="title" item="4"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="4"><p></p></div>
                            <div class="title" item="5"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="5"><p></p></div>
                            <div class="title" item="6"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="6"><p></p></div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="eight wide column">Blue P4:
                        <div class="ui accordion" team="blue" playerid="3">
                            <div class="title" item="0"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="0"><p></p></div>
                            <div class="title" item="1"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="1"><p></p></div>
                            <div class="title" item="2"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="2"><p></p></div>
                            <div class="title" item="3"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="3"><p></p></div>
                            <div class="title" item="4"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="4"><p></p></div>
                            <div class="title" item="5"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="5"><p></p></div>
                            <div class="title" item="6"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="6"><p></p></div>
                        </div>
                    </div>
                    <div class="eight wide column">Red P4:
                        <div class="ui accordion" team="red" playerid="3">
                            <div class="title" item="0"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="0"><p></p></div>
                            <div class="title" item="1"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="1"><p></p></div>
                            <div class="title" item="2"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="2"><p></p></div>
                            <div class="title" item="3"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="3"><p></p></div>
                            <div class="title" item="4"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="4"><p></p></div>
                            <div class="title" item="5"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="5"><p></p></div>
                            <div class="title" item="6"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="6"><p></p></div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="eight wide column">Blue P5:
                        <div class="ui accordion" team="blue" playerid="4">
                            <div class="title" item="0"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="0"><p></p></div>
                            <div class="title" item="1"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="1"><p></p></div>
                            <div class="title" item="2"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="2"><p></p></div>
                            <div class="title" item="3"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="3"><p></p></div>
                            <div class="title" item="4"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="4"><p></p></div>
                            <div class="title" item="5"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="5"><p></p></div>
                            <div class="title" item="6"><i class="dropdown icon"></i><img width="40" height="40"></div>
                            <div class="content" item="6"><p></p></div>
                        </div>
                    </div>
                    <div class="eight wide column">Red P5:
                        <div class="ui accordion" team="red" playerid="4">
                        <div class="title" item="0"><i class="dropdown icon"></i><img width="40" height="40"></div>
                        <div class="content" item="0"><p></p></div>
                        <div class="title" item="1"><i class="dropdown icon"></i><img width="40" height="40"></div>
                        <div class="content" item="1"><p></p></div>
                        <div class="title" item="2"><i class="dropdown icon"></i><img width="40" height="40"></div>
                        <div class="content" item="2"><p></p></div>
                        <div class="title" item="3"><i class="dropdown icon"></i><img width="40" height="40"></div>
                        <div class="content" item="3"><p></p></div>
                        <div class="title" item="4"><i class="dropdown icon"></i><img width="40" height="40"></div>
                        <div class="content" item="4"><p></p></div>
                        <div class="title" item="5"><i class="dropdown icon"></i><img width="40" height="40"></div>
                        <div class="content" item="5"><p></p></div>
                        <div class="title" item="6"><i class="dropdown icon"></i><img width="40" height="40"></div>
                        <div class="content" item="6"><p></p></div></div>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
        <script>
            let items = {};
            $.getJSON("http://raw.communitydragon.org/latest/plugins/rcp-be-lol-game-data/global/default/v1/items.json", (data) => {
                data.forEach(element => {
                    items[element.id] = element;
                });
            });

            function addItem(itemID, element, index) {
                //let f = '<div class="title"><i class="dropdown icon"><img width="40" height="40" src=http://ddragon.leagueoflegends.com/cdn/10.23.1/img/item/' + itemID + '.png"></i>' + items[itemID].name + '</div><div class="content"><p>' + items[itemID].description + '</p></div>'
                //element.html(element.html() + f);
                if(element.attr('itemid') != itemID) {
                    element.children('.title[item=' + idx + ']').first().children('img').first().attr('src', 'http://ddragon.leagueoflegends.com/cdn/10.23.1/img/item/' + itemID + '.png')
                    element.children('.title[item=' + idx + ']').first().children('i').first().text(items[itemID].name)
                    element.children('.content[item=' + idx + ']').first().children('p').first().text(items[itemID].description)
                    element.attr('itemid', itemID)
                }
            }

            setInterval(() => {            
                $.getJSON("http://localhost:3000/overlay/combineddata", (data) => {                  // Change to real thing, put into loop
                    console.log(data)
                    data.redTeamPlayers.forEach((pl, idx) => {
                        let elem = $("div[team=red][playerid=" + idx + "]");
                        pl.items.forEach((item, idx) => {
                            addItem(item, elem, idx);
                        });
                    });
                    data.blueTeamPlayers.forEach((pl, idx) => {
                        let elem = $("div[team='blue'][playerid='" + idx + "']");
                        pl.items.forEach((item, idx) => {
                            addItem(item, elem, idx);
                        });
                    });
                })
            }, 1000);

            $('.ui.accordion').accordion();
        </script>
    </body>
</html>